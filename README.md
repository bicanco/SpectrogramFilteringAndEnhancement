# Spectrogram Filtering And Enhancement

## Project Proposal for SCC-5830 - Image Processing and Analysis

### Student
David Souza Rodrigues

### Abstract
The objective of this project is to remove noise and enhance the spectrograms generated from audio records of soundscapes provided by the Laboratory of Spatial Ecology and Conservantion (LEEC), located at the UNESP's campus of Rio Claro. The main processing tasks involved in this project, are image filtering followed by image enhancement of the spectrograms. The spectrograms are generated by applying a Fast Fourier transform (FFT) to the audios. These spectrograms are used in the field of bioacoustics and soundscape ecology to help characterize the soundscape and identify species present in the recordings. The output images of this project are spectrograms with reduced noise and enhanced events, presumably helping in species identification.

### Image Examples

![Example 1](images/LEEC02__0__20161129_054600_ma.png)
![Example 2](images/LEEC02__0__20161129_072900_ma.png)
![Example 3](images/LEEC02__0__20161129_080100_ma.png)
![Example 4](images/LEEC02__0__20161130_063100_ma.png)
![Example 5](images/LEEC02__0__20161202_050100_ma.png)


### Main objective

The objective of this project is to remove noise and enhance the spectrograms generated from audio records of soundscapes provided by the Laboratory of Spatial Ecology and Conservantion (LEEC), located at the UNESP's campus of Rio Claro.


### Description of the input images

The input images are grayscale images generated with the **generateImage.py** script from some of the audios provided by the Laboratory of Spatial Ecology and Conservantion (LEEC), located at the UNESP's campus of Rio Claro. The script applies a Fast Fourier Transform (FFT) to the audio signals through the *specgram* function of the *matplotlib* library. The source audios used are available at the **audios** folder. The images represent spectrograms of the 1 minute long audios. The x axis stands for time, while the y axis stands for frequency. The images are located at the **images** folder. The events of interest are, normally, the brighter sections of the picture, and their shape and frequency can be used to caracterize different sounds present in nature, such as bird calls. One use of spectrograms, is with audios obtained through Passive Acoustic Monitoring (PAM), to identify the presence of different species at the recording site.

### Steps

* The first step was to try different image filtering techniques to remove noise. After applying several techniques, some were discarded (Laplacian, GaussianLaplacian, Prewitt, Sobel), some had visual differences (FilterInFrequencyDomain) and some had no significant visual difference (Gaussian, Maximum, Minimum, Percentile, Rank, Uniform). The discarded filters were discarded due to the resulting image having even more noise than the original image.
* The second step was to apply image enhancement techniques to try improving the perception of events of interest. Two techniques were applied, a logarithmic function and a histogram equalisation. Both were applied to the original image without filtering and to the filtered images.
The logarthmic function was not adequate to enhance the images, and has increased the saturation beyond that of the original image for all inputs images (original and filtered).
The histogram equalisation on the other hand, has improved the contrast of the image, with different levels depending on wheter the image was already filtered or not.
* The final step was to evaluate if the images have been improved and if relevant data has been lost. The evalutaion was made visually, by verifing if the already known points of interest, described in the tags, are possible to identify. Ideally, the spectrograms would be reverted back to audio format, heard and compared with the original audios. However, there was not enough time to address this implementation.

### Results

By analysing the results, some conclusions were drawn.
* First, not all filters are suited to this problem. Some even result in loss of most of the relevant information available.
* Second, enhancing the image by applying a logarithmic funtion proved futile, as it increased the saturation of the image and made it almost completely white.
* Third, the histogram equalisation shows pomise in enhancing the images. Although filtering the image first does not appear to have improved the overall result of the equalisation when compared with applying the equalisation to the original unfiltered image.
* Fourth, these analyses were limited to grayscale images, there results could have been different if the images were generated as coloured images.
